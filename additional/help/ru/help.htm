<!doctype html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<style type="text/css">
td, th { border: 1px solid #c3c3c3; padding: 0 3px 0 3px; }
table { border-collapse: collapse; }
img { max-width: 100%; }
</style>
<meta name="generator" content="ReText 7.2.3">
<title>help</title>
<style type="text/css">
</style>
</head>
<body>
<h1>ClipKA</h1>
<p>Эта программа -- множественный буфер обмена и менеджер горячих клавиш.
Замена неправильной кодировки, замена неправильно набранного регистра
текста, задачи на скриптовом языке Groovy.</p>
<p>Ключи командной строки:<br>
-p [Порт], --port [Port] - изменить порт, на котором работает программа<br>
-t [Номер], --task [Номер] - номер команды, которую надо сразу запустить<br>
-g [Номер], --group [Номер] - номер группы команд, которую надо показать  </p>
<p><a name=C1></a></p>
<p>Задачи выполняются двумя способами: 
- проверка нажатия указанных клавиш 
- запуск программы с параметрами </p>
<p>Данные хранятся в файлах sqlite, расположены в папке dat. Файлы можно
удалить, при запуске будут проинициализированы заново.</p>
<h2>Работа с текстом.</h2>
<p>Как в общем случае можно обработать выделенный текст в любом поле ввода. Можно послать сочетание клавиш для копирования, дождаться появления текста в буфере обмена (в некоторых случаях это может занимать достаточно продолжительное время). Обработать полученный текст. Вставить новый текст в позицию курсора. И вот есть 2 варианта:
1 - послать сочетание клавиш для вставки текста. 2 - послать специальное сочетание символов в виде набора кодов, который будет соответствовать символу. Для системы Windows - это клавиша Alt. Коды соответствуют OEM кодировке текущей системы (для русского языка кодовая страница 866). Для Linux можно использовать клавишу Compose. В папке с установленной программой находится файл .XCompose, в котором описаны коды, аналогичные кодам в Windows.
На самом деле, первый вариант достаточно надежный, если не брать в расчет некоторые терминалы, для которых необходимо указывать специальные клавиши вставки. Второй вариант лучше использовать только для вставки коротких текстов. </p>
<p><a name=C2></a></p>
<h2>Ограничения</h2>
<p>Версия Java 11</p>
<p>Пока не работает на 32 разрядном Linux.</p>
<p>Некрасиво отображается системный трей в окружении Cinnamon. Причем эти
проблемы даже у тестовой программы java. Вместо трея лучше запускать
обычное окно с кнопками действий.</p>
<p>Горячие клавиши не работают с дисплейным сервером Wayland. Функции для
отслеживания нажатий клавиш используют X11. Работает множественный буфер обмена. Задачи можно запускать с помощью командной строки.</p>
<p>Минимальная версия Windows для работы программы: Windows Vista</p>
<p>Для проверки запуска приложения и запуска задач с помощью командной
строки открывается порт на компьютере. Для запуска нескольких приложений
нужно использовать разные порты.</p>
<p>Нет защиты базы с записями буфера обмена. Можно ограничить запись в
базу, фильтруя заголовки/классы окон.</p>
<p><a name=Sett></a></p>
<h2>Настройки</h2>
<p><img alt="" src="md_media/image1.png"></p>
<p>Системные настройки</p>
<p>Socket port. При первом запуске программа резервирует указанный порт.
При повторном запуске порт проверяется и не дает запустить вторую копию
программы. Еще одно использование - запуск задачи из командной строки.</p>
<p>Показывать окно с кнопками действий. У программы имеется обычное окно с
кнопками основных действий. Возможна ситуация, когда системный tray
недоступен. Тогда должно показываться данное окно (это действие по
умолчанию). При установке флажка окно будет показываться всегда.</p>
<p>Показывать иконку в системном трее. Если флажок не установлен,
показывается окно с кнопками действий.</p>
<p>Показывать уведомление, если задача завершена с ошибкой. Если флажок установлен, после задачи, которая завершена с ошибкой, показывается всплывающее окно уведомлений. В любом случае, записи можно посмотреть в окне 'Оповещения и ошибки'</p>
<p>Время в секундах для всплывающего окна уведомления по умолчанию. Если значение равно нулю, окно уведомлений не закрывается.  </p>
<p>Настройки для буфера обмена</p>
<p>Количество записей на странице. При открытии списка клипов буфера обмена
на экране показывается указанное количество клипов.</p>
<p>Максимальный размер текста. Ограничение размера текста при копировании в буфер.</p>
<p>Поиск в списке клипов без учета раскладки клавиатуры. При установленном флажке поиск будет происходить, даже если выбрана другая раскладка клавиатуры.  </p>
<p>Удалить дубликаты текстов в буфере. При вставке клипа проверяются клипы
с таким же содержимым. Чтобы не набирать дубликаты в писке клипов - их
можно удалять. Следует иметь в виду, что при удалении дубликатов можно
потерять информацию о времени создания и источнике текста в буфере.</p>
<p>Время в секундах, после которого прекращается запоминание позиции в
списке клипов. Для удобного выбора нескольких идущих последовательно
клипов, при открытии списка сохраняется предыдущая позиция. После
указанного времени - список клипов открывается, начиная с самых
последних.</p>
<p>Разделитель текстов клипов при выделении нескольких в списке клипов. При выделении нескольких клипов в списке их можно получить одной строкой. Каждый клип будет отделяться от другого указанным текстом (по умолчанию используется перенос строки).  </p>
<p>Строка для конвертирования ошибочных раскладок клавиатуры. На данный момент конвертирование происходит только для 2-х раскладок.  </p>
<p>Строка для конвертирования ошибочно набранного регистра букв.   </p>
<p>Отслеживать буфер обмена: выделение - настройка видна только в Linux.
По умолчанию выделение не отслеживается.</p>
<p><a name=Clp></a></p>
<h2>Окно сохраненных текстовых клипов буфера обмена.</h2>
<p><img alt="" src="md_media/image2.png"></p>
<p>Показывается список клипов с указанием времени копирования, заголовка и
класса окна владельца. Для системы Linux дополнительно показывается
буфер обмена: обычный или выделение. При выборе клипа запоминается
текущая позиция. При повторном открытии списка курсор устанавливается на
предыдущий клип. Позиция курсора сбрасывается после истечения времени,
указанного в настройках.<br>
Выделенные строки в списке клипов автоматически объединяются в общую строку, с разделителем, указанным в настройках.<br>
Можно выполнить задачи, попадающие в специальную группу.  </p>
<p><a name=Gr></a></p>
<h2>Группы задач</h2>
<p><img alt="" src="md_media/image3.png"></p>
<p>Задачи можно сгруппировать. При открытии группы задач, можно
посмотреть/запустить задачи только из указанной группы. У группы можно
указать горячие клавиши. При вводе этих клавиш открывается список задач
с отбором по выбранной группе.</p>
<p><a name=Tsk></a></p>
<h2>Задачи</h2>
<p><img alt="" src="md_media/image4.png"></p>
<p>Можно выполнять действия над строками, полученными из буфера обмена или
выделенными в текстовом редакторе. Каждая задача состоит из списка
подзадач, выполняемых последовательно.</p>
<p>Обмен данными между подзадачами ведется с помощью специального
хранилища- словаря, куда можно поместить текстовое содержимое, указав
любой код, а также получить обратно. Если код словаря пустой - работаем
с текущей обрабатываемой строкой.</p>
<p>Необходимо принять во внимание, что есть две специальные подзадачи:
копирование в буфер обмена и вставка из буфера. Несмотря на указание
сочетаний клавиш, эти подзадачи особые. В некоторых случаях (например,
при работе с сервером RDP) обновление буфера обмена может занимать
длительное время и нельзя использовать просто имитацию нажатия клавиш.
Необходимо дождаться реального обновления буфера.</p>
<p>Существующие подзадачи:</p>
<p>"Посылать символ(ы), имитируя ввод на клавиатуре" - Можно безопасно
использовать только для клавиш, которые не зависят от раскладки
клавиатуры. Не стоит использовать для передачи текста.<br>
"Попытаться скопировать выделенный текст в буфер обмена" - Несмотря
на указание горячей клавиши, это не просто имитация нажатия клавиш.
Операция пытается именно скопировать значение в буфер обмена, ожидая
ответа.<br>
"Попытаться вставить текст из буфера обмена в текущую позицию курсора" - Несмотря на указание горячей клавиши, это не просто имитация нажатия клавиш. Операция пытается именно вставить значение из буфера обмена<br>
"Посылать символ(ы), используя специальную клавишу Compose (для системы
Windows - Alt)" - Отсылает коды клавиш с помощью специально настроеной
клавиши Compose (для системы Windows - Alt). Может являться аналогом
вставки из буфера обмена<br>
"Получить строку из буфера обмена и поместить в словарь"<br>
"Сохранить указанную строку в буфер обмена"<br>
"Введенную в содержание строку сохранить как текущую обрабатываемую"<br>
"Сохранить текущую обрабатываемую строку в словарь"<br>
"Получить текущую обрабатываемую строку из словаря"<br>
"Удалить строку из словаря (если больше не нужна)"<br>
"Изменить кодировку текста"<br>
"Изменить регистр текста"<br>
"Поместить в список клипов"<br>
"Прочитать строку из списка клипов" - Если в содержании указано число, оно интерпретируется как смещение от последнего клипа. Число 0 - последний клип. Если содержание пустое и задача выполняется из списка клипов - получает выделенные строки. Если содержание пустое и задача выполняется самостоятельно - получает последний клип.<br>
"Показать окно оповещения" - Показывает окно оповещения, если заполнена текущая обрабатываемая строка. В содержание можно занести время в секундах, в течение которого будет открыто окно.<br>
"Показать окно уведомления об ошибке" - Показывает окно уведомления об ошибке, если заполнена текущая обрабатываемая строка. В содержание можно занести время в секундах, в течение которого будет открыто окно.<br>
"Записать оповещение в таблицу 'Оповещения и ошибки'" - Записывает текущую обрабатываемую строку как оповещение в таблицу 'Оповещения и ошибки'. В содержание можно занести имя оповещения.<br>
"Записать ошибку в таблицу 'Оповещения и ошибки'" - Записывает текущую обрабатываемую строку как ошибку в таблицу 'Оповещения и ошибки'. В содержание можно занести имя ошибки. 
"Очистить таблицу 'Оповещения и ошибки'"<br>
"Выполнить код на языке Groovy" - В содержание заносится код на языке Groovy. Можно использовать переменные result, result1...result9. В переменную result заносится текущая обрабатываемую строку. После возврата в текущую обрабатываемую строку записывается последнее значение или значение, находящееся в переменной result. Остальные переменные можно получить из хранилища по кодам 1...9. <br>
"Показать/скрыть сохраненный список буфера обмена"<br>
"Показать сохраненный список клипов буфера обмена"<br>
"Скрыть сохраненный список клипов буфера обмена"
"Получить свойства текущего окна"</p>
<p><a name=Flt></a></p>
<h2>Фильтры окон</h2>
<p><img alt="" src="md_media/image5.png"></p>
<p><img alt="" src="md_media/image6.png"></p>
<p>Задача может выполняться только в указанном окне или позиции экрана.
Можно указать в формате регулярных выражений разрешенную или запрещенную
комбинацию символов    в заголовке или классе окна. Можно, например,
использовать фильтр, чтобы не копировать в список клипов сохраненные
пароли.</p>
<p><a name=Aler></a></p>
<h2>Оповещения и ошибки</h2>
<p><img alt="" src="md_media/image7.png"></p>
<p>Это отдельная таблица, в которую автоматически попадают ошибки при
выполнении задач. Кроме того вы можете сами записывать туда текст, чтобы
потом анализировать.</p>

</body>
</html>
